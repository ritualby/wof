---
import BaseLayout from "../../layouts/BaseLayout.astro";
const hargaTiket = 75000;
---

<BaseLayout title="Buy Tickets - World of Fantasy 2025">
  <div class="min-h-screen bg-black text-white">
    <!-- Header -->
    <div class="relative overflow-hidden bg-gradient-to-br from-fuchsia-600/20 via-purple-600/10 to-cyan-600/20 border-b border-white/10">
      <div class="absolute inset-0 opacity-30">
        <div class="absolute top-0 right-0 w-96 h-96 bg-fuchsia-600 rounded-full filter blur-[150px]"></div>
      </div>
      
      <div class="relative max-w-4xl mx-auto px-6 py-20 text-center">
        <a href="/" class="inline-block mb-8 text-white/60 hover:text-white transition-colors">
          ‚Üê Back to Home
        </a>
        <h1 class="text-6xl md:text-8xl font-black bebas gradient-text mb-4">
          GET YOUR TICKET
        </h1>
        <p class="text-xl text-white/70">Secure your spot at Indonesia's biggest music festival</p>
      </div>
    </div>

    <!-- Ticket Form -->
    <section class="max-w-2xl mx-auto px-6 py-16">
      <div class="bg-gradient-to-br from-white/5 to-white/[0.02] backdrop-blur-sm rounded-3xl p-8 md:p-12 border border-white/10">
        <div class="flex items-center justify-between mb-8 pb-6 border-b border-white/10">
          <div>
            <h2 class="text-3xl font-black bebas tracking-wide mb-1">FESTIVAL PASS</h2>
            <p class="text-white/60 text-sm">Regular ‚Ä¢ 2-Day Access</p>
          </div>
          <div class="text-right">
            <p class="text-4xl font-black bebas gradient-text">Rp 350K</p>
          </div>
        </div>

        <form id="payForm" class="space-y-6">
          <div>
            <label for="name" class="block text-sm font-semibold mb-2 text-white/80">Full Name</label>
            <input 
              id="name" 
              type="text" 
              required 
              class="w-full px-5 py-4 bg-white/5 border border-white/20 rounded-xl focus:outline-none focus:border-fuchsia-500 transition-colors text-white placeholder-white/40"
              placeholder="Enter your full name"
            />
          </div>

          <div>
            <label for="email" class="block text-sm font-semibold mb-2 text-white/80">Email Address</label>
            <input 
              id="email" 
              type="email" 
              required 
              class="w-full px-5 py-4 bg-white/5 border border-white/20 rounded-xl focus:outline-none focus:border-fuchsia-500 transition-colors text-white placeholder-white/40"
              placeholder="your@email.com"
            />
          </div>

          <div class="pt-4">
            <button 
              type="submit" 
              class="w-full py-5 bg-gradient-to-r from-fuchsia-600 to-cyan-500 hover:from-fuchsia-500 hover:to-cyan-400 rounded-2xl font-bold text-lg transition-all duration-300 hover:shadow-lg hover:shadow-fuchsia-500/50 hover:scale-[1.02]"
            >
              Pay Rp {hargaTiket.toLocaleString()} ‚Üí
            </button>
          </div>

          <div class="flex items-center justify-center gap-4 text-xs text-white/50 pt-2">
            <span>üîí Secure Payment</span>
            <span>‚Ä¢</span>
            <span>üì± Instant E-Ticket</span>
          </div>
        </form>

        <!-- What's Included -->
        <div class="mt-10 pt-8 border-t border-white/10">
          <h3 class="text-lg font-bold bebas tracking-wide mb-4">What's Included</h3>
          <ul class="space-y-2 text-sm text-white/70">
            <li class="flex items-start gap-2">
              <span class="text-green-400 mt-0.5">‚úì</span>
              <span>Full Event Access (14 Februari 2026)</span>
            </li>
            <li class="flex items-start gap-2">
              <span class="text-green-400 mt-0.5">‚úì</span>
              <span>Access to all performances and stages</span>
            </li>
            <li class="flex items-start gap-2">
              <span class="text-green-400 mt-0.5">‚úì</span>
              <span>Official festival merchandise</span>
            </li>
            <li class="flex items-start gap-2">
              <span class="text-green-400 mt-0.5">‚úì</span>
              <span>Food court and vendor access</span>
            </li>
          </ul>
        </div>
      </div>

      <!-- Need Help -->
      <div class="text-center mt-8 text-sm text-white/60">
        <p>Need help? Contact us at <a href="mailto:info@worldoffantasy.id" class="text-fuchsia-400 hover:text-fuchsia-300">info@worldoffantasy.id</a></p>
      </div>
    </section>
  </div>

  <script src="https://app.sandbox.midtrans.com/snap/snap.js"
          data-client-key="SB-Mid-client-XXXX"></script>

    <script>
      const form = document.getElementById("payForm");

      form.addEventListener("submit", async (e) => {
        e.preventDefault();

        const name = document.getElementById("name").value;
        const email = document.getElementById("email").value;

        const res = await fetch("/api/midtrans", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({
            name,
            email,
            amount: 75000
          })
        });

        const data = await res.json();

        snap.pay(data.token, {
          onSuccess: () => alert("Pembayaran berhasil!"),
          onPending: () => alert("Menunggu pembayaran..."),
          onError: () => alert("Pembayaran gagal")
        });
      });
    </script>
  </body>
</html>
